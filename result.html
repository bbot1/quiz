<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>퀴즈 결과</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* 요약, 리스트 스타일은 이전 코드 그대로 */
    #summary { text-align:center; margin-bottom:20px; }
    .result-section { margin-bottom:30px; }
    .result-section h2 { font-size:18px; border-bottom:1px solid #ccc; }
    .item { margin:12px 0; }
    .index { font-weight:bold; margin-right:8px; }
  </style>
</head>
<body>
  <div id="result-container">
    <h1>퀴즈 결과</h1>
    <div id="summary"></div>

    <div id="correctList" class="result-section">
      <h2>✅ 맞춘 문제</h2>
    </div>

    <div id="wrongList" class="result-section">
      <h2>❌ 틀린 문제</h2>
    </div>

    <div style="text-align:right;">
      <button onclick="location.href='index.html'">처음으로</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const results = JSON.parse(localStorage.getItem('quizResults') || '[]');
      const score = parseInt(localStorage.getItem('quizScore')) || 0;
      const total = parseInt(localStorage.getItem('quizTotal')) || results.length;
      const correctListEl = document.getElementById('correctList');
      const wrongListEl = document.getElementById('wrongList');

      // 요약
      document.getElementById('summary').innerHTML =
        `맞춘: <strong>${score}</strong>  |  틀린: <strong>${total - score}</strong>  |  전체: <strong>${total}</strong>`;

      results.forEach(r => {
        // 정답인지 여부 판단
        let isCorrect = false;
        if (r.type === 'multiple' || r.type === 'sequence') {
          isCorrect = Number(r.user) === Number(r.answer);
        } else if (r.type === 'short') {
          isCorrect = r.answer.includes(r.user);
        } else if (r.type === 'ox') {
          isCorrect = r.user === r.answer;
        } else if (r.type === 'group' || r.type === 'image-blank') {
          isCorrect = JSON.stringify(r.user) === JSON.stringify(r.answer);
        }

        // 템플릿
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <span class="index">${r.index}.</span>
          <span class="question-text">${r.question}</span>
          <div class="user-answer">내 답: ${JSON.stringify(r.user)}</div>
          <div class="correct-answer">정답: ${JSON.stringify(r.answer)}</div>
        `;
        if (isCorrect) correctListEl.appendChild(div);
        else wrongListEl.appendChild(div);
      });
    });
  </script>
</body>
</html>
