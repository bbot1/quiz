<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í€´ì¦ˆ ê²°ê³¼</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="result-container">
    <h2>í€´ì¦ˆ ê²°ê³¼</h2>
    <div id="resultScore"></div>
    <div id="resultTime"></div>
    <div id="wrongList"></div>
    <button onclick="location.href='start.html'">ì²˜ìŒìœ¼ë¡œ</button>
    <h3>ğŸ“œ ì´ì „ ê¸°ë¡</h3>
    <div id="recordList"></div>
  </div>
  <script>
    const user = localStorage.getItem('quizUser') || 'ìµëª…';
    const startTime = new Date(localStorage.getItem('quizStartTime'));
    const endTime = new Date();
    const score = parseInt(localStorage.getItem('quizScore') || '0');
    const total = parseInt(localStorage.getItem('quizTotal') || '0');
    const wrong = JSON.parse(localStorage.getItem('quizWrong') || '[]');

    document.getElementById('resultScore').textContent = `âœ… ì ìˆ˜: ${score} / ${total}`;
    document.getElementById('resultTime').textContent = `â±ï¸ ì‹œê°„: ${Math.floor((endTime - startTime) / 1000)}ì´ˆ`;

    const wrongList = document.getElementById('wrongList');
    if (wrong.length === 0) {
      wrongList.innerHTML = "<p>ğŸ‘ ëª¨ë‘ ë§ì•˜ìŠµë‹ˆë‹¤!</p>";
    } else {
      wrongList.innerHTML = "<h4>âŒ í‹€ë¦° ë¬¸ì œ:</h4><ul>" + wrong.map(q => `<li>${q.question}</li>`).join('') + "</ul>";
    }

    // ê¸°ë¡ ì €ì¥
    const records = JSON.parse(localStorage.getItem('quizRecords') || '[]');
    const newRecord = {
      name: user,
      score: score,
      total: total,
      time: Math.floor((endTime - startTime) / 1000),
      date: new Date().toLocaleString()
    };
    records.push(newRecord);
    localStorage.setItem('quizRecords', JSON.stringify(records));

    // ê¸°ë¡ í‘œì‹œ
    const recordList = document.getElementById("recordList");
    recordList.innerHTML = "<ul>" + records.map(r =>
      `<li>${r.date} - ${r.name}: ${r.score}/${r.total} (${r.time}ì´ˆ)</li>`
    ).join("") + "</ul>";
  </script>
</body>
</html>
