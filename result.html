<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>퀴즈 결과</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #result-container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .wrong-item {
      margin-bottom: 30px;
      border-bottom: 1px solid #eee;
      padding-bottom: 20px;
    }
    .wrong-item:last-child {
      border: none;
      padding-bottom: 0;
    }
    .wrong-item h3 {
      margin: 0 0 10px;
    }
    .choice-button, .group-input, .choice-display {
      cursor: default;
    }
    .choice-button {
      margin: 4px 0;
      padding: 8px;
      width: 100%;
      text-align: left;
      border: 1px solid #ccc;
      background: #f9f9f9;
      color: #333;
      border-radius: 4px;
    }
    .choice-button.correct {
      border-color: #28a745;
      background: #e6ffed;
    }
    .choice-button.wrong {
      border-color: #dc3545;
      background: #ffe6e6;
    }
    .group-ui {
      display: flex;
      gap: 20px;
      margin: 8px 0;
    }
    .group-left p {
      margin: 6px 0;
      font-weight: bold;
    }
    .group-right div {
      display: flex;
      align-items: center;
      margin: 6px 0;
    }
    .group-input {
      width: 30px;
      padding: 4px;
      margin-right: 8px;
      text-align: center;
      border: 1px solid #ccc;
      background: #f9f9f9;
      border-radius: 4px;
    }
    #pagination {
      text-align: center;
      margin: 20px 0;
    }
    #pagination button {
      margin: 0 10px;
      padding: 6px 12px;
    }
  </style>
</head>
<body>
  <div id="result-container">
    <h1>퀴즈 결과</h1>
    <div id="wrongList"></div>
    <div id="pagination">
      <button id="prevPage">이전</button>
      <span id="pageInfo"></span>
      <button id="nextPage">다음</button>
    </div>
    <div style="text-align:right;">
      <button onclick="location.href='index.html'">처음으로</button>
    </div>
  </div>

  <script>
    // 틀린 문제 목록 (q에 user 속성 포함)
    const wrong = JSON.parse(localStorage.getItem('quizWrong') || '[]');
    const perPage = 3;
    let page = 0;

    const wrongList = document.getElementById('wrongList');
    const prevPage = document.getElementById('prevPage');
    const nextPage = document.getElementById('nextPage');
    const pageInfo = document.getElementById('pageInfo');

    function renderPage() {
      wrongList.innerHTML = '';
      if (wrong.length === 0) {
        wrongList.innerHTML = '<p>틀린 문제가 없습니다!</p>';
        document.getElementById('pagination').style.display = 'none';
        return;
      }
      const start = page * perPage;
      const end = Math.min(start + perPage, wrong.length);

      for (let i = start; i < end; i++) {
        const q = wrong[i];
        const item = document.createElement('div');
        item.className = 'wrong-item';

        // 문제 텍스트
        const h3 = document.createElement('h3');
        h3.textContent = `${i+1}. ${q.question}`;
        item.appendChild(h3);

        // 보기/입력 영역 (readonly)
        if (q.type === 'multiple') {
          q.choices.forEach((ch, idx) => {
            const btn = document.createElement('div');
            btn.className = 'choice-button';
            btn.textContent = `${idx+1}. ${ch}`;
            if (idx === q.user) btn.classList.add(btn.textContent.startsWith(`${q.answer}.`) ? 'correct' : 'wrong');
            if (idx === q.answer - 1) btn.classList.add('correct');
            item.appendChild(btn);
          });
        } else if (q.type === 'short') {
          const div = document.createElement('div');
          div.className = 'choice-display';
          div.textContent = `내 답: ${q.user}  |  정답: ${q.answer.join(', ')}`;
          item.appendChild(div);
        } else if (q.type === 'ox') {
          ['O','X'].forEach(label => {
            const btn = document.createElement('div');
            btn.className = 'choice-button';
            btn.textContent = label;
            if (label === q.user) btn.classList.add(label
